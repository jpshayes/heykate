(() => {
  var themeToggle = document.getElementById("theme-toggle");
  themeToggle.addEventListener("change", (event) => {
    if (event.currentTarget.checked) {
      localStorage.theme = "dark";
      document.documentElement.classList.add("dark");
    } else {
      localStorage.theme = "light";
      document.documentElement.classList.remove("dark");
    }
  });
  if (localStorage.getItem("theme") == "dark") {
    themeToggle.checked = true;
    document.documentElement.classList.add("dark");
  } else {
    themeToggle.checked = false;
    document.documentElement.classList.remove("dark");
  }
  (function($) {
    $(document).ready(function() {
      var message_id = 0;
      $(".single_add_to_cart_button").on("click", function(event) {
        event.preventDefault();
        message_id++;
        var pid = $(this).val();
        var thisbtn = $(this);
        $.ajax({
          url: woocommerce_params.ajax_url,
          type: "POST",
          data: {
            action: "heykate_ajax_message",
            product_id: pid,
            message_id
          },
          success: function(response) {
            $("#message").append(response);
            thisbtn.prop("disabled", true);
            var current2 = $("#message" + message_id);
            $(current2).delay(5e3).fadeOut("slow", function() {
              $(this).remove();
              thisbtn.prop("disabled", false);
            });
          },
          error: function(error) {
            console.log(error);
          }
        });
      });
      $("#menu-toggle").click(function() {
        $("#mobile-menu").toggleClass("hidden");
      });
      $("#profile-toggle").click(function() {
        $("#profile-menu").toggleClass("hidden");
      });
      var current = location.pathname;
      $(".get-active a").each(function() {
        var $this = $(this);
        if ($this.attr("href").indexOf(current) !== -1) {
          $this.addClass("active");
          $this.attr("aria-current", "page");
        }
      });
      var fieldreq = $("form label span.required");
      fieldreq.each(function() {
        var label = $(this).parent("label");
        label.next("input").attr("required", true);
      });
    });
  })(jQuery);
})();
